------------------------------------------------------------------------------------
registration
authorization
expeditions(history?)
expedition(description?)  # researcher + spaceship description
expedition(create/arrange?)
expedition(report?)

------------------------------------------------------------------------------------
Роли:
- командир
- пользователь

------------------------------------------------------------------------------------
Пользователь:

Регистрация:
Форма:
- имя пользователя (строка, length <= 50)
- пароль (строка, length > 6, length <= 255)
- имя (строка, length <= 255)
- фамилия (строка, length <= 255)
- возраст (число)
- пол (муж, жен)
- список профессий (чекбокс)
После Регистрации перенаправлять на Авторизацию

Авторизация:
Форма:
- имя пользователя
- пароль
После Авторизации перенаправлять на Список Экспедиций

Список Экспедиций:
Список отсортирован по дате начала
+--------------------------------------------------+
|Название, статус, дата начала, дата конца [кнопка]|
+--------------------------------------------------+
[Кнопка] перенаправляет на Описание Экспедиции

Описание Экспедиции:
Если >= IN PROGRESS
- название
- статус
- дата начала
- станция вылета, станция приземления (станция-планета-галактика)
- описание корабля (без расположения, потому что тупо)
- список описания участников (пометить, кто из них - командир)
Если LANDED
- отчет
Если COMPLETED
- дата конца

Описание Корабля:
- Название
- Дата создания
- Производитель (название, страна)
- Максимальная скорость (км/c?)
- Вместимость (м^3?)
- Каюты, отображать к каким имеет доступ текущий пользователь

Описание Пользователя:
- Имя
- Фамилия
- Возраст
- Пол
- Является капитаном (Да/Нет)
- Список профессий?

Описание отчета:
- список поломок


Командир:
Список Экспедиций:
Если IN PROGRESS:
- добавить кнопку для перехода на экран создания отчета
Если LANDED:
- кнопку завершения экспедиции


Создание экспедиции:
- список доступных станций (отбытия, прибытия):
    - описание станции
        - название
        - дата создания
        - долгота
        - широта
    - описание планеты
        - название
        - радиус
        - тип
    - описание галактики
        - название
        - дата открытия
        - отдаленность от Земли
- список доступных кораблей (для выбранных станций):
    - название
    - дата создания
    - производитель (название, страна)
    - максимальная скорость (км/c?)
    - вместимость (м^3?)
    - каюты
- список свободных участников
    - имя
    - фамилия
    - профессии
    - возраст
    - пол

Создание отчета об экспедиции:
- список чекбоксов с типами поломок (двигатель, обшивка и т.д.)
- кнопка "отправить"

? создания космолета, каюты<->профессия, производителя, (станция, планета, галактика)?

------------------------------------------------------------------------------------
Триггер для установления места корабля

Если статус экспедиции IN_PROGRESS -> LANDED, то нужно засетить current_station_id

Если создается отчет, то статус экспедиции переводится в IN_PROGRESS -> LANDED

Засетить значение end_time, когда статус перешел в COMPLETED

ресеарчер - в экспедиции
корабль - в полете

Если появилось новое значение в MtM экспедиция - ресеарчер, то обновляем поле

Если создана экспедиция, то меняем поле у корабля.

Когда эскпедиция завершена, то меняем поле обратно. У ресеарчера в том числе.

Триггер: Если обновляется колонка статус, то может обновится двумя вариантами. Иначе исключение.

-----
Функция выбрать корабли, которые свободные

Функция выбрать researcher , которые не заняты

Функция, которая сетить статус экспедиции completed. (id экспедиции)

Создания экспедиции. Откуда, куда, корабль

Функция добавление людей в экспедицию

insert report, insert поломки.

Select по списку станций, планет и галактик

select экспедиция join станция, исследователи, корабль

select корабль join кабины, исследователи, профессия

-- Проверка на условие, что корабль находится в выбранной станции и может приземлится куда хочешь прилететь

Триггер на создание экспедиции.
вызов функции которая проверит по условию.